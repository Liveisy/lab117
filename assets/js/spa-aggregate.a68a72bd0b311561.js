"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7777],{79359:(t,e,i)=>{i.d(e,{AQ:()=>c,me:()=>s,sH:()=>a,uJ:()=>o});var r=i(29452),n=Object.prototype.hasOwnProperty;function s(t,e,i){return t||0===t||""===t?e(t)+(i?",":""):"!"}function a(t,e){return e?Math.floor(t).toString(36):void 0===t||0===t?"":Math.floor(t).toString(36)}function o(t){let e=0,i=Object.prototype.hasOwnProperty.call(Object,"create")?Object.create(null):{};return function(r){return void 0===r||""===r?"":(r=t.obfuscateString(String(r)),n.call(i,r))?a(i[r],!0):(i[r]=e++,"'"+r.replace(h,"\\$1"))}}function c(t,e){var i=[];return Object.entries(t||{}).forEach(([t,n])=>{if(!(i.length>=64)){var s,a=5;switch(t=e(t),typeof n){case"object":n?s=e((0,r.A)(n)):a=9;break;case"number":a=6,s=n%1?n:n+".";break;case"boolean":a=n?7:8;break;case"undefined":a=9;break;default:s=e(n)}i.push([a,t+(s?","+s:"")])}}),i}var h=/([,\\;])/g},91387:(t,e,i)=>{i.r(e),i.d(e,{Aggregate:()=>W});var r=i(80326),n=i(78367),s=i(59957),a=i(50655),o=i(47468),c=i(8068),h=i(50772),u=0;function d(t,e,i,r){Object.defineProperty(this,"interaction",{value:t,writable:!0}),this.parent=e,this.id=++u,this.type=i,this.children=[],this.end=null,this.jsEnd=this.start=r,this.jsTime=0,this.attrs={},this.cancelled=!1}var l=d.prototype;l.child=function(t,e,i,r){var n=this.interaction;if(n.end||n.nodes>=128)return null;n.onNodeAdded(this);var s=new d(n,this,t,e);return s.attrs.name=i,n.nodes++,!r&&n.remaining++,s},l.callback=function(t,e){this.jsTime+=t,e>this.jsEnd&&(this.jsEnd=e,this.interaction.lastCb=e)},l.cancel=function(){this.cancelled=!0;var t=this.interaction;t.remaining--},l.finish=function(t){if(this.end)return;this.end=t;let e=this.parent;for(;e?.cancelled;)e=e.parent;e&&e.children.push(this),this.parent=null;var i=this.interaction;i.remaining--,i.lastFinish=t,i.checkFinish()};var f=(0,h.dV)().o.ST,m=(0,h.dV)().o.CT,p={};function N(t,e,i,r,n,s){this.agentRef=s,p[s.agentIdentifier]=0,this.id=++p[s.agentIdentifier],this.eventName=t,this.nodes=0,this.remaining=0,this.finishTimer=null,this.checkingFinish=!1,this.lastCb=this.lastFinish=e,this.handlers=[],this.onFinished=n,this.done=!1;var a=(this.root=new d(this,null,"interaction",e)).attrs;a.trigger=t,a.initialPageURL=c.m,a.oldRoute=r,a.newURL=i,a.oldURL="initialPageLoad"===t?document.referrer:i,a.custom={},a.store={}}var g=N.prototype;g.checkFinish=function(){var t=this;if(t.remaining>0){t._resetFinishCheck();return}!t.checkingFinish&&null===t.root.end&&(t._resetFinishCheck(),t.checkingFinish=!0,t.finishTimer=f(()=>{t.checkingFinish=!1,t.finishTimer=f(()=>{t.finishTimer=null,t.remaining<=0&&t.finish()},1)},0))},g.setNewURL=function(t){this.root.attrs.newURL=t},g.setNewRoute=function(t){this.root.attrs.newRoute=t},g.onNodeAdded=function(){this._resetFinishCheck()},g._resetFinishCheck=function(){this.finishTimer&&(m(this.finishTimer),this.finishTimer=null,this.checkingFinish=!1)},g.finish=function(){var t=this.root;if(null===t.end){var e=Math.max(this.lastCb,this.lastFinish),i=t.attrs.custom;this.onFinished&&this.onFinished(this),Object.entries(this.agentRef.info.jsAttributes||{}).forEach(([t,e])=>{t in i||(i[t]=e)}),t.end=e,this.agentRef.ee.emit("interaction",[this])}};var v=i(89578),T=i(56797),x=i(79359);class L{constructor(t){this.obfuscator=t.runtime.obfuscator,this.info=t.info,this.firstTimestamp=void 0}serializeMultiple(t,e,i){var r=(0,x.uJ)(this.obfuscator),n="bel.7";return t.forEach(t=>{n+=";"+this.serializeInteraction(t.root,e,i,t.routeChange,r,this.info)}),this.firstTimestamp=void 0,n}serializeSingle(t,e,i,r){var n=(0,x.uJ)(this.obfuscator),s="bel.7;"+this.serializeInteraction(t,e,i,r,n,this.info);return this.firstTimestamp=void 0,s}serializeInteraction(t,e,i,r,n,s){e=e||0;var a="initialPageLoad"===t.attrs.trigger,o={interaction:1,ajax:2,customTracer:4};let c=(t,h)=>{if("customEnd"===t.type)return h.push([3,(0,x.sH)(t.end-this.firstTimestamp)]);var u=o[t.type],d=t.start,l=t.children.length,f=0,m=s.atts,p=a&&i.length&&1===u,N=[],g=t.attrs,v=g.metrics,L=g.params,b=s.queueTime,j=s.applicationTime;void 0===this.firstTimestamp?(d+=e,this.firstTimestamp=d):d-=this.firstTimestamp;var w=[(0,x.sH)(d),(0,x.sH)(t.end-t.start),(0,x.sH)(t.jsEnd-t.end),(0,x.sH)(t.jsTime)];switch(u){case 1:w[2]=(0,x.sH)(t.jsEnd-this.firstTimestamp),w.push(n(g.trigger),n((0,T.L)(g.initialPageURL,!0)),n((0,T.L)(g.oldURL,!0)),n((0,T.L)(g.newURL,!0)),n(g.customName),a?"":r?1:2,(0,x.me)(a&&b,x.sH,!0)+(0,x.me)(a&&j,x.sH,!0)+(0,x.me)(g.oldRoute,n,!0)+(0,x.me)(g.newRoute,n,!0)+n(g.id),n(t.id),(0,x.me)(g.firstPaint,x.sH,!0)+(0,x.me)(g.firstContentfulPaint,x.sH,!1));var S=(0,x.AQ)(g.custom,n);N=N.concat(S),f=S.length,m&&(l++,N.push("a,"+n(m)));break;case 2:if(w.push(n(L.method),(0,x.sH)(L.status),n(L.host),n(L.pathname),(0,x.sH)(v.txSize),(0,x.sH)(v.rxSize),g.isFetch?1:g.isJSONP?2:"",n(t.id),(0,x.me)(t.dt&&t.dt.spanId,n,!0)+(0,x.me)(t.dt&&t.dt.traceId,n,!0)+(0,x.me)(t.dt&&t.dt.timestamp,x.sH,!1)),Object.keys(L?.gql||{}).length){var P=(0,x.AQ)(L.gql,n);N=N.concat(P),f=P.length}break;case 4:var F=g.tracedTime;w.push(n(g.name),(0,x.me)(F,x.sH,!0)+n(t.id))}for(var k=0;k<t.children.length;k++)c(t.children[k],N);if(w.unshift((0,x.sH)(u),(0,x.sH)(l+=f)),h.push(w),l&&h.push(N.join(";")),p){var I=",",R="b",C=0;Object.values(i.slice(1,21)||{}).forEach(t=>{void 0!==t?(R+=I+(0,x.sH)(t-C),I=",",C=t):(R+=I+"!",I="")}),h.push(R)}else 1===u&&h.push("");return h};return c(t,[]).join(";")}}var b=i(64266),j=i(5568),w=i(56804),S=i(98916),P=i(16266),F=i(23073),k=i(48513),I=i(48532),R=i(94581),C=i(87516);let{TZ:H,NC:U,xq:O,uP:E,Lc:_,rw:y,SG:z,l9:M,dT:A,oW:B,U6:D,op:J,UT:q,gx:K,BR:Q,L3:V}=j;class W extends S.r{static featureName=H;constructor(t){let e;super(t,H);let i=this.state={initialPageURL:c.m,lastSeenUrl:c.m,lastSeenRouteName:null,timerMap:{},timerBudget:O,currentNode:null,prevNode:null,nodeOnLastHashUpdate:null,initialPageLoad:null,pageLoaded:!1,childTime:0,depth:0,disableSpaFix:(t.init.feature_flags||[]).indexOf("disable-spa-fix")>-1};this.spaSerializerClass=new L(t);let a=this,h=b.ee.get(t.agentIdentifier),u=h.get("mutation"),d=h.get("promise"),l=h.get("history"),f=h.get("events"),m=h.get("timer"),p=h.get("fetch"),g=h.get("jsonp"),T=h.get("xhr"),x=h.get("tracer");if(this.waitForFlags(["spa"]).then(([i])=>{i?(e=t.runtime.harvester,this.drain()):(this.blocked=!0,this.deregisterDrain())}),!0!==t.init.spa.enabled)return;i.initialPageLoad=new N("initialPageLoad",0,i.lastSeenUrl,i.lastSeenRouteName,Y,t),i.initialPageLoad.save=!0,t.runtime.session?.isNew&&(i.initialPageLoad.root.attrs.custom.isFirstOfSession=!0),i.prevInteraction=i.initialPageLoad,i.currentNode=i.initialPageLoad.root,i.initialPageLoad[M]++,(0,r.i)(E,S,this.featureName,h),(0,r.i)(y,S,this.featureName,d);var j={getCurrentNode:function(){return i.currentNode},setCurrentNode:$};function S(){i.depth++,this.prevNode=i.currentNode,this.ct=i.childTime,i.childTime=0,i.timerBudget=O}function W(){i.depth--;var t=this.jsTime||0,e=t-i.childTime;i.childTime=this.ct+t,i.currentNode&&(i.currentNode.callback(e,this[_]),this.isTraced&&(i.currentNode.attrs.tracedTime=e)),this.jsTime=i.currentNode?0:e,$(this.prevNode),this.prevNode=null,i.timerBudget=O}function X(t,e,i){var r=this[B];if(r){var n=r[A],s=this.inc;this.isTraced=!0,s?n[M]--:r&&r.finish(t),i?$(r):n.checkFinish()}}function G(t){return i.currentNode&&i.currentNode[A]===t?i.currentNode:t.root}function Z(){this.resolved||(this.resolved=!0,this[B]=i.currentNode)}function $(t){i.pageLoaded||t||!i.initialPageLoad||(t=i.initialPageLoad.root),i.currentNode&&i.currentNode[A].checkFinish(),i.prevNode=i.currentNode,i.currentNode=t&&!t[A].root.end?t:null}function Y(t){t===i.initialPageLoad&&(i.initialPageLoad=null);var e=t.root,r=e.attrs;i.currentNode=e,Object.values(t.handlers||{}).forEach(function(t){t(r.store)}),$(null)}(0,r.i)("spa-register",function(t){"function"==typeof t&&t(j)},w.K7.spa,h),(0,r.i)(_,W,this.featureName,h),(0,r.i)("cb-end",W,this.featureName,d),(0,r.i)(E,function(e,r){var n=e[0],s=n.type,a=n["__nrNode:".concat(k.W)];if(!i.pageLoaded&&("load"===s&&r===window||c.A4)&&(i.pageLoaded=!0,this.prevNode=i.currentNode=null,i.initialPageLoad&&(a=i.initialPageLoad.root,i.initialPageLoad[M]=0,V(function(){U.push("popstate")}))),a)$(a);else if("hashchange"===s)$(i.nodeOnLastHashUpdate),i.nodeOnLastHashUpdate=null;else if(r instanceof XMLHttpRequest)$(h.context(r).spaNode);else if(!i.currentNode&&-1!==U.indexOf(s)){var o=new N(s,this[E],i.lastSeenUrl,i.lastSeenRouteName,Y,t);if(i.prevInteraction=o,$(o.root),"click"===s){var u=function(t){if(-1!==["a","button","input"].indexOf(t.tagName.toLowerCase()))return t.title||t.value||t.innerText}(n.target);u&&(i.currentNode.attrs.custom.actionText=u)}}n["__nrNode:".concat(k.W)]=i.currentNode},this.featureName,f),(0,r.i)("setTimeout-end",function(t,e,r){i.currentNode&&!(i.timerBudget-this.timerDuration<0)&&(!t||t[0]instanceof Function)&&(i.currentNode[A][M]++,this.timerId=r,i.timerMap[r]=i.currentNode,this.timerBudget=i.timerBudget-50)},this.featureName,m),(0,r.i)("clearTimeout-start",function(t){var e=t[0],r=i.timerMap[e];if(r){var n=r[A];n[M]--,n.checkFinish(),delete i.timerMap[e]}},this.featureName,m),(0,r.i)(E,function(){i.timerBudget=this.timerBudget||O;var t=this.timerId,e=i.timerMap[t];$(e),delete i.timerMap[t],e&&e[A][M]--},this.featureName,m),(0,r.i)(E,function(){$(this[B])},this.featureName,T),(0,r.i)("new-xhr",function(){if(!i.disableSpaFix&&!i.currentNode&&i.prevInteraction&&!i.prevInteraction.ignored){let t=i.prevInteraction;i.currentNode=t.root,t.root.end=null}i.currentNode&&(this[B]=i.currentNode.child("ajax",null,null,!0))},this.featureName,T),(0,r.i)("send-xhr-start",function(){var e=this[B];e&&!this.sent&&(this.sent=!0,e.dt=this.dt,e.dt?.timestamp&&(e.dt.timestamp=t.runtime.timeKeeper.correctAbsoluteTimestamp(e.dt.timestamp)),e.jsEnd=e.start=this.startTime,e[A][M]++)},this.featureName,T),(0,r.i)("xhr-resolved",function(){var t=this[B];if(t){if(!(0,s.gX)(this.params)){t.cancel();return}var e=t.attrs;e.params=this.params,e.metrics=this.metrics,t.finish(this.endTime),this.currentNode&&this.currentNode.interaction&&this.currentNode.interaction.checkFinish()}},this.featureName,h),(0,r.i)("new-jsonp",function(t){i.currentNode&&((this[D]=i.currentNode.child("ajax",this[J])).start=this["new-jsonp"],this.url=t,this.status=null)},this.featureName,g),(0,r.i)("cb-start",function(t){var e=this[D];e&&($(e),this.status=200)},this.featureName,g),(0,r.i)("jsonp-error",function(){var t=this[D];t&&($(t),this.status=0)},this.featureName,g),(0,r.i)(Q,function(){var t=this[D];if(t){if(null===this.status){t.cancel();return}var e=t.attrs,i=e.params={},r=(0,n.D)(this.url);i.method="GET",i.pathname=r.pathname,i.host=r.hostname+":"+r.port,i.status=this.status,e.metrics={txSize:0,rxSize:0},e.isJSONP=!0,t.jsEnd=this[Q],t.jsTime=this[y]?this[Q]-this[y]:0,t.finish(t.jsEnd)}},this.featureName,g),(0,r.i)(J,function(e,r){if(e){if(!i.disableSpaFix&&!i.currentNode&&i.prevInteraction&&!i.prevInteraction.ignored){let t=i.prevInteraction;i.currentNode=t.root,t.root.end=null}i.currentNode&&(this[B]=i.currentNode.child("ajax",this[J]),r&&this[B]&&(this[B].dt=r,this[B].dt?.timestamp&&(this[B].dt.timestamp=t.runtime.timeKeeper.correctAbsoluteTimestamp(this[B].dt.timestamp))))}},this.featureName,p),(0,r.i)(K+"start",function(t){i.currentNode&&(this[B]=i.currentNode,i.currentNode[A][M]++)},this.featureName,p),(0,r.i)(K+"end",function(t,e,i){var r=this[B];r&&r[A][M]--},this.featureName,p),(0,r.i)(q,function(t,e){var i=this[B];if(i){if(t||!(0,s.gX)(this.params)){i.cancel();return}var r=i.attrs;r.params=this.params,r.metrics={txSize:this.txSize,rxSize:this.rxSize},r.isFetch=!0,i.finish(this[q])}},this.featureName,p),(0,r.i)("newURL",function(t,e){if(i.currentNode)i.currentNode[A].setNewURL(t);else if(i.prevInteraction&&!i.prevInteraction.ignored){let e=i.prevInteraction;e.setNewURL(t),e.root.end=null,$(e.root)}i.currentNode&&(i.lastSeenUrl!==t&&(i.currentNode[A].routeChange=!0),e&&(i.nodeOnLastHashUpdate=i.currentNode)),i.lastSeenUrl=t},this.featureName,l),g.on("dom-start",function(t){if(i.currentNode){var e=t[0],r=e&&"SCRIPT"===e.nodeName&&""!==e.src,n=i.currentNode.interaction;r&&(n[M]++,e.addEventListener("load",function(){n[M]--,n.checkFinish()},(0,v.jT)(!1)),e.addEventListener("error",function(){n[M]--,n.checkFinish()},(0,v.jT)(!1)))}}),(0,r.i)(E,function(){$(i.prevNode)},this.featureName,u),(0,r.i)("resolve-start",Z,this.featureName,d),(0,r.i)("executor-err",Z,this.featureName,d),(0,r.i)("propagate",function(t,e){(e||!this[B])&&(this[B]=i.currentNode)},this.featureName,d),(0,r.i)(y,function(){$((this.getCtx?this.getCtx():this)[B])},this.featureName,d),(0,r.i)(z+"get",function(e){var r;r=i?.currentNode?.[A]?this.ixn=i.currentNode[A]:i?.prevNode?.end===null&&i?.prevNode?.[A]?.root?.[A]?.eventName!=="initialPageLoad"?this.ixn=i.prevNode[A]:this.ixn=new N("api",e,i.lastSeenUrl,i.lastSeenRouteName,Y,t),!i.currentNode&&(r.checkFinish(),i.depth&&$(r.root))},this.featureName,h),(0,r.i)(z+"actionText",function(t,e){var i=this.ixn.root.attrs.custom;e&&(i.actionText=e)},this.featureName,h),(0,r.i)(z+"setName",function(t,e,i){var r=this.ixn.root.attrs;e&&(r.customName=e),i&&(r.trigger=i)},this.featureName,h),(0,r.i)(z+"setAttribute",function(t,e,i){this.ixn.root.attrs.custom[e]=i},this.featureName,h),(0,r.i)(z+"end",function(t){var e=this.ixn,i=G(e);$(null),i.child("customEnd",t)?.finish(t),e.finish()},this.featureName,h),(0,r.i)(z+"ignore",function(t){this.ixn.ignored=!0},this.featureName,h),(0,r.i)(z+"save",function(t){this.ixn.save=!0},this.featureName,h),(0,r.i)(z+"tracer",function(t,e,i){var r=this.ixn,n=G(r),s=h.context(i);if(!e)return s.inc=++r[M],s[B]=n;s[B]=n.child("customTracer",t,e)},this.featureName,h),(0,r.i)(E,X,this.featureName,x),(0,r.i)("no-"+E,X,this.featureName,x),(0,r.i)(z+"getContext",function(t,e){var i=this.ixn.root.attrs.store;setTimeout(function(){e(i)},0)},this.featureName,h),(0,r.i)(z+"onEnd",function(t,e){this.ixn.handlers.push(e)},this.featureName,h),(0,r.i)("api-routeName",function(t,e){i.lastSeenRouteName=e,i.currentNode&&i.currentNode[A].setNewRoute(e)},this.featureName,h),h.on("spa-jserror",function(t,e,r,n){i.currentNode&&(r._interactionId=i.currentNode.interaction.id,i.currentNode.type&&"interaction"!==i.currentNode.type&&(r._interactionNodeId=i.currentNode.id))}),(0,r.i)("function-err",function(e,r,n){i.currentNode&&(n.__newrelic??={},n.__newrelic[t.agentIdentifier]={interactionId:i.currentNode.interaction.id},i.currentNode.type&&"interaction"!==i.currentNode.type&&(n.__newrelic[t.agentIdentifier].interactionNodeId=i.currentNode.id))},this.featureName,h),h.on("interaction",function(t){let r;if(t.ignored||!t.save&&!t.routeChange){h.emit("interactionDone",[t,!1]);return}if(i.prevInteraction===t&&(i.prevInteraction=null),t.root.attrs.id=(0,o.bz)(),"initialPageLoad"===t.root.attrs.trigger&&(t.root.attrs.firstPaint=F.J.current.value,t.root.attrs.firstContentfulPaint=P.j.current.value),h.emit("interactionDone",[t,!0]),a.events.add(t),r=t.root?.attrs?.trigger==="initialPageLoad"?"InitialPageLoad":t.routeChange?"RouteChange":"Custom",(0,I.p)(R.xV,["Spa/Interaction/".concat(r,"/Duration/Ms"),Math.max((t.root?.end||0)-(t.root?.start||0),0)],void 0,w.K7.metrics,h),!e){(0,C.R)(19);return}e.triggerHarvestFor(a)})}serializer(t){return this.spaSerializerClass.serializeMultiple(t,0,a.ss)}}}}]);