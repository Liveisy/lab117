"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1368],{73167:(e,t,r)=>{r.r(t),r.d(t,{Aggregate:()=>y});var i=r(29452),n=r(56797),a=r(57981),s=r(8068),o=r(98916),c=r(87516),u=r(40775),l=r(80326),h=r(94581),g=r(85341);let p=(e,t=[])=>{if(!e)return{path:void 0,nearestFields:{}};let r="",i=(e=>{try{let t=1,{tagName:r}=e;for(;e.previousElementSibling;)e.previousElementSibling.tagName===r&&t++,e=e.previousElementSibling;return t}catch(e){}})(e),n={};try{for(;e?.tagName;){let{id:i,localName:a}=e;t.forEach(t=>{n[function(e){return"tagName"===e&&(e="tag"),"className"===e&&(e="class"),"nearest".concat(e.charAt(0).toUpperCase()+e.slice(1))}(t)]||=e[t]?.baseVal||e[t]}),r=[a,i?"#".concat(i):"",r?">".concat(r):""].join(""),e=e.parentNode}}catch(e){}return{path:r?i?"".concat(r,":nth-of-type(").concat(i,")"):r:void 0,nearestFields:n}};class m{constructor(e,t,r){this.event=e,this.count=1,this.originMs=Math.floor(e.timeStamp),this.relativeMs=[0],this.selectorPath=t,this.rageClick=void 0,this.nearestTargetFields=r,this.currentUrl=(0,n.L)(""+location)}aggregate(e){this.count++,this.relativeMs.push(Math.floor(e.timeStamp-this.originMs)),this.isRageClick()&&(this.rageClick=!0)}isRageClick(){let e=this.relativeMs.length;return"click"===this.event.type&&e>=a.nf&&this.relativeMs[e-1]-this.relativeMs[e-a.nf]<a.mq}}class f{#e=void 0;#t="";get aggregationEvent(){let e=this.#e;return this.#t="",this.#e=void 0,e}process(e,t){var r,i;let n;if(!e)return;let{selectorPath:s,nearestTargetFields:o}=function(e,t){let r;let i={};if(a.qN.includes(e.type)||e.target===window)r="window";else if(e.target===document)r="document";else{let{path:n,nearestFields:a}=p(e.target,t);r=n,i=a}return{selectorPath:r,nearestTargetFields:i}}(e,t),c=(r=e,i=s,n=r.type,"scrollend"!==r.type&&(n+="-"+i),n);if(c&&c===this.#t)this.#e.aggregate(e);else{let t=this.#e;return this.#t=c,this.#e=new m(e,s,o),t}}}var d=r(90203),v=r(94594);class y extends o.r{static featureName=a.TZ;constructor(e){super(e,a.TZ),this.eventsPerHarvest=1e3,this.referrerUrl=s.RI&&document.referrer?(0,n.L)(document.referrer):void 0,this.waitForFlags(["ins"]).then(([t])=>{if(!t){this.blocked=!0,this.deregisterDrain();return}this.trackSupportabilityMetrics(),(0,l.i)("api-recordCustomEvent",(e,t,r)=>{if(a.kd.includes(t))return(0,c.R)(46);this.addEvent({eventType:t,timestamp:this.toEpoch(e),...r})},this.featureName,this.ee),e.init.page_action.enabled&&(0,l.i)("api-addPageAction",(e,t,r,i)=>{if(!this.agentRef.runtime.entityManager.get(i))return(0,c.R)(56,this.featureName);this.addEvent({...r,eventType:"PageAction",timestamp:this.toEpoch(e),timeSinceLoad:e/1e3,actionName:t,referrerUrl:this.referrerUrl,...s.RI&&{browserWidth:window.document.documentElement?.clientWidth,browserHeight:window.document.documentElement?.clientHeight}},i)},this.featureName,this.ee);let r=()=>{};s.RI&&e.init.user_actions.enabled&&(this.userActionAggregator=new f,this.harvestOpts.beforeUnload=()=>r?.(this.userActionAggregator.aggregationEvent),r=e=>{try{if(e?.event){let{target:t,timeStamp:r,type:i}=e.event;this.addEvent({eventType:"UserAction",timestamp:this.toEpoch(r),action:i,actionCount:e.count,actionDuration:e.relativeMs[e.relativeMs.length-1],actionMs:e.relativeMs,rageClick:e.rageClick,target:e.selectorPath,currentUrl:e.currentUrl,...(0,d.v)(window)&&{iframe:!0},...this.agentRef.init.user_actions.elementAttributes.reduce((r,i)=>{var n;return n=i,!("window"!==e.selectorPath&&"document"!==e.selectorPath&&t instanceof HTMLElement&&t?.[n])||(r[function(e){return"tagName"===e&&(e="tag"),"className"===e&&(e="class"),"target".concat(e.charAt(0).toUpperCase()+e.slice(1))}(i)]=String(t[i]).trim().slice(0,128)),r},{}),...e.nearestTargetFields})}}catch(e){}},(0,l.i)("ua",e=>{r(this.userActionAggregator.process(e,this.agentRef.init.user_actions.elementAttributes))},this.featureName,this.ee));let i=[...e.init.performance.capture_marks?["mark"]:[],...e.init.performance.capture_measures?["measure"]:[]];if(i.length)try{i.forEach(t=>{PerformanceObserver.supportedEntryTypes.includes(t)&&new PerformanceObserver(r=>{r.getEntries().forEach(r=>{try{this.reportSupportabilityMetric("Generic/Performance/"+t+"/Seen");let i=e.init.performance.capture_detail?function(e){return null==e?{}:(0,v.a)(e)?function e(t,r="entryDetail"){let i={};return null==t||Object.keys(t).forEach(n=>{let a=r+"."+n;(0,v.a)(t[n])?Object.assign(i,e(t[n],a)):null!==t[n]&&void 0!==t[n]&&(i[a]=t[n])}),i}(e):{entryDetail:e}}(r.detail):{};this.addEvent({...i,eventType:"BrowserPerformance",timestamp:this.toEpoch(r.startTime),entryName:r.name,entryDuration:r.duration,entryType:t})}catch(e){}})}).observe({buffered:!0,type:t})})}catch(e){}s.RI&&e.init.performance.resources.enabled&&(0,l.i)("browserPerformance.resource",t=>{try{let{name:r,duration:i,...a}=t.toJSON(),o=!1;try{let t=new URL(r).hostname,i=t.includes("newrelic.com")||t.includes("nr-data.net")||t.includes("nr-local.net");if(this.agentRef.init.performance.resources.ignore_newrelic&&i||this.agentRef.init.performance.resources.asset_types.length&&!this.agentRef.init.performance.resources.asset_types.includes(a.initiatorType))return;(o=t===s.gm?.location.hostname||e.init.performance.resources.first_party_domains.includes(t))&&this.reportSupportabilityMetric("Generic/Performance/FirstPartyResource/Seen"),i&&this.reportSupportabilityMetric("Generic/Performance/NrResource/Seen")}catch(e){}this.reportSupportabilityMetric("Generic/Performance/Resource/Seen");let c={...a,eventType:"BrowserPerformance",timestamp:Math.floor(e.runtime.timeKeeper.correctRelativeTimestamp(a.startTime)),entryName:(0,n.L)(r),entryDuration:i,firstParty:o};this.addEvent(c)}catch(e){this.ee.emit("internal-error",[e,"GenericEvents-Resource"])}},this.featureName,this.ee),(0,l.i)("api-measure",(t,r)=>{let{start:i,duration:n,customAttributes:a}=t,s={...a,eventType:"BrowserPerformance",timestamp:Math.floor(e.runtime.timeKeeper.correctRelativeTimestamp(i)),entryName:r,entryDuration:n,entryType:"measure"};this.addEvent(s)},this.featureName,this.ee),e.runtime.harvester.triggerHarvestFor(this),this.drain()})}addEvent(e={},t){if(!e||!Object.keys(e).length)return;if(!e.eventType){(0,c.R)(44);return}for(let t in e){let r=e[t];e[t]=r&&"object"==typeof r?(0,i.A)(r):r}let r={timestamp:Math.floor(this.agentRef.runtime.timeKeeper.correctRelativeTimestamp((0,u.t)())),pageUrl:(0,n.L)(""+s.m),currentUrl:(0,n.L)(""+location)},a={...this.agentRef.info.jsAttributes||{},...r,...e};this.events.add(a,t)||this.events.isEmpty(void 0,t)||(this.ee.emit(h.xV,["GenericEvents/Harvest/Max/Seen"]),this.agentRef.runtime.harvester.triggerHarvestFor(this,{targetEntityGuid:t}),this.events.add(a))}serializer(e){return(0,g.G)({ins:e},this.obfuscator.obfuscateString.bind(this.obfuscator),"string")}queryStringsBuilder(){return{ua:this.agentRef.info.userAttributes,at:this.agentRef.info.atts}}toEpoch(e){return Math.floor(this.agentRef.runtime.timeKeeper.correctRelativeTimestamp(e))}trackSupportabilityMetrics(){let e="Config/Performance/";this.agentRef.init.performance.capture_marks&&this.reportSupportabilityMetric(e+"CaptureMarks/Enabled"),this.agentRef.init.performance.capture_measures&&this.reportSupportabilityMetric(e+"CaptureMeasures/Enabled"),this.agentRef.init.performance.resources.enabled&&this.reportSupportabilityMetric(e+"Resources/Enabled"),this.agentRef.init.performance.resources.asset_types?.length!==0&&this.reportSupportabilityMetric(e+"Resources/AssetTypes/Changed"),this.agentRef.init.performance.resources.first_party_domains?.length!==0&&this.reportSupportabilityMetric(e+"Resources/FirstPartyDomains/Changed"),!1===this.agentRef.init.performance.resources.ignore_newrelic&&this.reportSupportabilityMetric(e+"Resources/IgnoreNewrelic/Changed")}}},85341:(e,t,r)=>{r.d(t,{G:()=>function e(t,r,i="string",n=[]){return t&&"object"==typeof t&&Object.keys(t).forEach(a=>{"object"==typeof t[a]?e(t[a],r,i,n):typeof t[a]!==i||n.includes(a)||(t[a]=r(t[a]))}),t}})},90203:(e,t,r)=>{r.d(t,{v:()=>i});function i(e){return!!e&&e.self!==e.top}},94594:(e,t,r)=>{r.d(t,{a:()=>i});function i(e){return e?.constructor===({}).constructor}}}]);