"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7211],{79359:(e,t,r)=>{r.d(t,{AQ:()=>u,me:()=>a,sH:()=>s,uJ:()=>o});var i=r(29452),n=Object.prototype.hasOwnProperty;function a(e,t,r){return e||0===e||""===e?t(e)+(r?",":""):"!"}function s(e,t){return t?Math.floor(e).toString(36):void 0===e||0===e?"":Math.floor(e).toString(36)}function o(e){let t=0,r=Object.prototype.hasOwnProperty.call(Object,"create")?Object.create(null):{};return function(i){return void 0===i||""===i?"":(i=e.obfuscateString(String(i)),n.call(r,i))?s(r[i],!0):(r[i]=t++,"'"+i.replace(p,"\\$1"))}}function u(e,t){var r=[];return Object.entries(e||{}).forEach(([e,n])=>{if(!(r.length>=64)){var a,s=5;switch(e=t(e),typeof n){case"object":n?a=t((0,i.A)(n)):s=9;break;case"number":s=6,a=n%1?n:n+".";break;case"boolean":s=n?7:8;break;case"undefined":s=9;break;default:a=t(n)}r.push([s,e+(a?","+a:"")])}}),r}var p=/([,\\;])/g},93107:(e,t,r)=>{r.r(t),r.d(t,{Aggregate:()=>m});var i=r(80326),n=r(29452),a=r(48532),s=r(59957),o=r(50376),u=r(56804),p=r(98916),h=r(94594);function c(e){if("object"!=typeof e||!e.query||"string"!=typeof e.query)return;let t=e.query.trim().match(/^(query|mutation|subscription)\s?(\w*)/),r=t?.[1];if(r)return{operationName:e.operationName||t?.[2]||"Anonymous",operationType:r,operationFramework:"GraphQL"}}function f(e){let t;if(!e||"string"!=typeof e&&"object"!=typeof e)return;if(t="string"==typeof e?JSON.parse(e):e,!(0,h.a)(t)&&!Array.isArray(t))return;let r=!1;if(Array.isArray(t)?t.some(e=>d(e)):d(t))return t}function d(e){return!("object"!=typeof e||!e.query||"string"!=typeof e.query)}var l=r(79359);class m extends p.r{static featureName=o.T;constructor(e){super(e,o.T),(0,s.Xv)(e.runtime.denyList),this.underSpaEvents={};let t=this;this.ee.on("interactionDone",(e,t)=>{this.underSpaEvents[e.id]&&(t||this.underSpaEvents[e.id].forEach(e=>this.events.add(e)),delete this.underSpaEvents[e.id])}),(0,i.i)("returnAjax",e=>this.events.add(e),this.featureName,this.ee),(0,i.i)("xhr",function(){t.storeXhr(...arguments,this)},this.featureName,this.ee),this.waitForFlags([]).then(()=>this.drain())}storeXhr(e,t,r,i,o,p){let h;t.time=r,h=e.cat?(0,n.A)([e.status,e.cat]):(0,n.A)([e.status,e.host,e.pathname]);let d=(0,s.gX)(e),l=this.agentRef.init.feature_flags?.includes("ajax_metrics_deny_list");if(this.agentRef.features?.[u.K7.jserrors]&&(d||!l)&&this.agentRef.sharedAggregator?.add(["xhr",h,e,t]),!d){e.hostname===this.agentRef.info.errorBeacon||this.agentRef.init.proxy?.beacon&&e.hostname===this.agentRef.init.proxy.beacon?(this.reportSupportabilityMetric("Ajax/Events/Excluded/Agent"),l&&this.reportSupportabilityMetric("Ajax/Metrics/Excluded/Agent")):(this.reportSupportabilityMetric("Ajax/Events/Excluded/App"),l&&this.reportSupportabilityMetric("Ajax/Metrics/Excluded/App"));return}(0,a.p)("bstXhrAgg",["xhr",h,e,t],void 0,u.K7.sessionTrace,this.ee);let m={method:e.method,status:e.status,domain:e.host,path:e.pathname,requestSize:t.txSize,responseSize:t.rxSize,type:o,startTime:r,endTime:i,callbackDuration:t.cbTime};if(p.dt&&(m.spanId=p.dt.spanId,m.traceId=p.dt.traceId,m.spanTimestamp=Math.floor(this.agentRef.runtime.timeKeeper.correctAbsoluteTimestamp(p.dt.timestamp))),m.gql=e.gql=function({body:e,query:t}={}){if(e||t)try{let r=function(e){if(!e)return;Array.isArray(e)||(e=[e]);let t=[],r=[];for(let i of e){let e=c(i);e&&(t.push(e.operationName),r.push(e.operationType))}if(r.length)return{operationName:t.join(","),operationType:r.join(","),operationFramework:"GraphQL"}}(f(e));if(r)return r;let i=c(function(e){if(e&&"string"==typeof e)return f(Object.fromEntries(new URLSearchParams(e)))}(t));if(i)return i}catch(e){}}({body:p.body,query:p.parsedOrigin?.search}),m.gql&&this.reportSupportabilityMetric("Ajax/Events/GraphQL/Bytes-Added",(0,n.A)(m.gql).length),this.agentRef.features?.[u.K7.softNav])(0,a.p)("ajax",[m],void 0,u.K7.softNav,this.ee);else if(p.spaNode){let e=p.spaNode.interaction.id;this.underSpaEvents[e]??=[],this.underSpaEvents[e].push(m)}else this.events.add(m)}serializer(e){if(!e.length)return;let t=(0,l.uJ)(this.agentRef.runtime.obfuscator),r="bel.7;";for(let i=0;i<e.length;i++){let n=e[i],a=[(0,l.sH)(n.startTime),(0,l.sH)(n.endTime-n.startTime),(0,l.sH)(0),(0,l.sH)(0),t(n.method),(0,l.sH)(n.status),t(n.domain),t(n.path),(0,l.sH)(n.requestSize),(0,l.sH)(n.responseSize),"fetch"===n.type?1:"",t(0),(0,l.me)(n.spanId,t,!0)+(0,l.me)(n.traceId,t,!0)+(0,l.me)(n.spanTimestamp,l.sH,!1)],s="2,",o=this.agentRef.info.jsAttributes,u=(0,l.AQ)({...o||{},...n.gql||{}},t);a.unshift((0,l.sH)(u.length)),s+=a.join(","),u&&u.length>0&&(s+=";"+u.join(";")),i+1<e.length&&(s+=";"),r+=s}return r}}},94594:(e,t,r)=>{r.d(t,{a:()=>i});function i(e){return e?.constructor===({}).constructor}}}]);